<html>

<head>
  <meta charset="UTF-8">
  <link rel="Stylesheet" href="style.css" type="text/css">
  <title>Web Tracking Example</title>
</head>

<body>
  <header>
    <h1>Web Tracking Example</h1>
  </header>
  <div id="statsContainer"></div>
  <button id="webcamButton" onclick="webcamToggle()">Switch to Webcam</button>
  <p id="img"></p>
  <p id="gyro"></p>
  <p id="accel"></p>
  <p id="stats">Loading..</p>
  <p id="avg"></p>
  <div id='editor'>
    <div id='middle-col'>
      <canvas id="c" width="720" height="486"></canvas>
      <video playsinline id="v" loop autoplay style="display:none;" src="video/chenjing_beijing.mp4"
        type="video/mp4"></video>
      <div id="controls">
        <div>
          <button id="playButton" onclick="playToggle()"><img id="playImg" alt="Play Button"
              src="img/play1.svg"></button>
        </div>
        <h1 id="vidTime">00:00:00:00</h1>
        <div>
          <button id="loopButton" onclick="loopToggle()"><img id="loopImg" alt="Loop On Off"
              src="img/noloop1.svg"></button>
        </div>
      </div>
    </div>
  </div>
  </br>
  <script src="https://cdn.bootcss.com/vConsole/3.2.0/vconsole.min.js">
  </script>
  <script>
    let vConsole = new VConsole();
    console.log('haha');
  </script>
  <script src="../dist/wasm/umd/index.js"></script>
  <script>
    let media = 'video';
    let t0, t1 = Infinity, sum = 0, line, perf = 0, perfStr, avg, wasmStats;
    let image_timestamp_start, image_timestamp, fps, image_cnt = 0;
    let pixels, oldpixels, cw, ch;
    let dpixels;//record the result of detectfastcorner of one pixels
    let imgInfo, gyroInfo, accelInfo;
    let avgDisplay = document.getElementById('avg');
    let web_tracking_module;
    let img_processor;
    let imgproc_HEAPU8;
    let psum;
    let myimgcnt = 0;

    function sleep(time) {
      return new Promise((resolve) => setTimeout(resolve, time));
    }

    //wasm video
    var vid = document.getElementById('v');
    var canvas = document.getElementById('c');
    var context = canvas.getContext('2d');
    // WebTracking().then(libary => {
    //   web_tracking_module = libary;
    //   vid.addEventListener("loadeddata", function() {
    //     canvas.setAttribute('height', vid.videoHeight);
    //     canvas.setAttribute('width', vid.videoWidth);
    //     cw = canvas.clientWidth; //usually same as canvas.height
    //     ch = canvas.clientHeight;
    //     img_processor = web_tracking_module.ImgProc.getImgProcessor(cw,ch,cw);
    //     imgproc_HEAPU8 = web_tracking_module.ImgProc.HEAPU8();
    //     draw();
    //     timeData();
    //     appendWasmCheck();
    //     eigenTest();
    //     gyroInit();
    //     accelInit();
    //   });
    // })
    // .catch(e => {
    //   console.log('There has been a problem with your fetch operation: ' + e.message);
    // });
    (async () => {
      // Wait for the library to initialize
      web_tracking_module = await WebTracking();
      console.log('yes')
      vid.addEventListener("loadeddata", function () {
        canvas.setAttribute('height', vid.videoHeight);
        canvas.setAttribute('width', vid.videoWidth);
        cw = canvas.clientWidth; //usually same as canvas.height
        ch = canvas.clientHeight;
        // sleep(200).then(() => {
        document.getElementById("stats").innerText = `ready to play`;
        img_processor = web_tracking_module.ImgProc.getImgProcessor(cw, ch, cw);
        imgproc_HEAPU8 = web_tracking_module.ImgProc.HEAPU8();
        draw();
        timeData();
        appendWasmCheck();
        eigenTest();
        gyroInit();
        accelInit();
        // })
      });
    })();

    var constraints = { video: { facingMode: "environment", width: 640, height: 480, frameRate: { ideal: 20 } }, audio: false };
    function webcamToggle() {
      media = media === 'video' ? 'webcam' : 'video';
      if (media === 'webcam') {
        myimgcnt = 0;
        controlContent = document.getElementById('controls').innerHTML;
        document.getElementById('webcamButton').innerHTML = 'Switch to Video';
        navigator.mediaDevices.getUserMedia(constraints)
          .then((stream) => {
            vid.srcObject = stream;
            let videoTracks = stream.getVideoTracks();
            if (videoTracks.length) {
              videoTrack = videoTracks[0];
            }
            console.log(stream);
            document.getElementById('controls').innerHTML = "Switch back to video for player controls";
          })
          .catch(function (err) {
            media = 'video';
            alert(err.name);
          });
      }
      else {
        image_cnt = 0;
        document.getElementById('controls').innerHTML = controlContent;
        document.getElementById('webcamButton').innerHTML = 'Switch to Webcam';
        vid.srcObject = null;
        vid.play();// for ios
        document.getElementById('playImg').setAttribute('src', 'img/pause1.svg')
      }
    }

    function detectrepeat() {
      if (media === 'webcam') {
        if (oldpixels === undefined) {
          oldpixels = pixels;
          console.log(pixels.data.length)
          return false;
        }// first frame
        else {
          let flag = (oldpixels.data[0]-pixels.data[0])||(oldpixels.data[1000]-pixels.data[1000])||(oldpixels.data[2000]-pixels.data[2000])||(oldpixels.data[3000]-pixels.data[3000])||(oldpixels.data[4000]-pixels.data[4000])||(oldpixels.data[5000]-pixels.data[5000])||(oldpixels.data[6000]-pixels.data[6000])||(oldpixels.data[7000]-pixels.data[7000])||(oldpixels.data[8000]-pixels.data[8000])||(oldpixels.data[9000]-pixels.data[9000])||(oldpixels.data[10000]-pixels.data[10000])||(oldpixels.data[11000]-pixels.data[11000])||(oldpixels.data[12000]-pixels.data[12000])||(oldpixels.data[13000]-pixels.data[13000])||(oldpixels.data[14000]-pixels.data[14000])||(oldpixels.data[15000]-pixels.data[15000])||(oldpixels.data[16000]-pixels.data[16000])||(oldpixels.data[17000]-pixels.data[17000])||(oldpixels.data[18000]-pixels.data[18000])||(oldpixels.data[19000]-pixels.data[19000])||(oldpixels.data[20000]-pixels.data[20000])||(oldpixels.data[21000]-pixels.data[21000])||(oldpixels.data[22000]-pixels.data[22000])||(oldpixels.data[23000]-pixels.data[23000])||(oldpixels.data[24000]-pixels.data[24000])||(oldpixels.data[25000]-pixels.data[25000])||(oldpixels.data[26000]-pixels.data[26000])||(oldpixels.data[27000]-pixels.data[27000])||(oldpixels.data[28000]-pixels.data[28000])||(oldpixels.data[29000]-pixels.data[29000])||(oldpixels.data[30000]-pixels.data[30000])||(oldpixels.data[31000]-pixels.data[31000])||(oldpixels.data[32000]-pixels.data[32000])||(oldpixels.data[33000]-pixels.data[33000])||(oldpixels.data[34000]-pixels.data[34000])||(oldpixels.data[35000]-pixels.data[35000])||(oldpixels.data[36000]-pixels.data[36000])||(oldpixels.data[37000]-pixels.data[37000])||(oldpixels.data[38000]-pixels.data[38000])||(oldpixels.data[39000]-pixels.data[39000])||(oldpixels.data[40000]-pixels.data[40000])||(oldpixels.data[41000]-pixels.data[41000])||(oldpixels.data[42000]-pixels.data[42000])||(oldpixels.data[43000]-pixels.data[43000])||(oldpixels.data[44000]-pixels.data[44000])||(oldpixels.data[45000]-pixels.data[45000])||(oldpixels.data[46000]-pixels.data[46000])||(oldpixels.data[47000]-pixels.data[47000])||(oldpixels.data[48000]-pixels.data[48000])||(oldpixels.data[49000]-pixels.data[49000])||(oldpixels.data[50000]-pixels.data[50000])||(oldpixels.data[51000]-pixels.data[51000])||(oldpixels.data[52000]-pixels.data[52000])||(oldpixels.data[53000]-pixels.data[53000])||(oldpixels.data[54000]-pixels.data[54000])||(oldpixels.data[55000]-pixels.data[55000])||(oldpixels.data[56000]-pixels.data[56000])||(oldpixels.data[57000]-pixels.data[57000])||(oldpixels.data[58000]-pixels.data[58000])||(oldpixels.data[59000]-pixels.data[59000])||(oldpixels.data[60000]-pixels.data[60000])||(oldpixels.data[61000]-pixels.data[61000])||(oldpixels.data[62000]-pixels.data[62000])||(oldpixels.data[63000]-pixels.data[63000])||(oldpixels.data[64000]-pixels.data[64000])||(oldpixels.data[65000]-pixels.data[65000])||(oldpixels.data[66000]-pixels.data[66000])||(oldpixels.data[67000]-pixels.data[67000])||(oldpixels.data[68000]-pixels.data[68000])||(oldpixels.data[69000]-pixels.data[69000])||(oldpixels.data[70000]-pixels.data[70000])||(oldpixels.data[71000]-pixels.data[71000])||(oldpixels.data[72000]-pixels.data[72000])||(oldpixels.data[73000]-pixels.data[73000])||(oldpixels.data[74000]-pixels.data[74000])||(oldpixels.data[75000]-pixels.data[75000])||(oldpixels.data[76000]-pixels.data[76000])||(oldpixels.data[77000]-pixels.data[77000])||(oldpixels.data[78000]-pixels.data[78000])||(oldpixels.data[79000]-pixels.data[79000])||(oldpixels.data[80000]-pixels.data[80000])||(oldpixels.data[81000]-pixels.data[81000])||(oldpixels.data[82000]-pixels.data[82000])||(oldpixels.data[83000]-pixels.data[83000])||(oldpixels.data[84000]-pixels.data[84000])||(oldpixels.data[85000]-pixels.data[85000])||(oldpixels.data[86000]-pixels.data[86000])||(oldpixels.data[87000]-pixels.data[87000])||(oldpixels.data[88000]-pixels.data[88000])||(oldpixels.data[89000]-pixels.data[89000])||(oldpixels.data[90000]-pixels.data[90000])||(oldpixels.data[91000]-pixels.data[91000])||(oldpixels.data[92000]-pixels.data[92000])||(oldpixels.data[93000]-pixels.data[93000])||(oldpixels.data[94000]-pixels.data[94000])||(oldpixels.data[95000]-pixels.data[95000])||(oldpixels.data[96000]-pixels.data[96000])||(oldpixels.data[97000]-pixels.data[97000])||(oldpixels.data[98000]-pixels.data[98000])||(oldpixels.data[99000]-pixels.data[99000])||(oldpixels.data[100000]-pixels.data[100000])||(oldpixels.data[101000]-pixels.data[101000])||(oldpixels.data[102000]-pixels.data[102000])||(oldpixels.data[103000]-pixels.data[103000])||(oldpixels.data[104000]-pixels.data[104000])||(oldpixels.data[105000]-pixels.data[105000])||(oldpixels.data[106000]-pixels.data[106000])||(oldpixels.data[107000]-pixels.data[107000])||(oldpixels.data[108000]-pixels.data[108000])||(oldpixels.data[109000]-pixels.data[109000])||(oldpixels.data[110000]-pixels.data[110000])||(oldpixels.data[111000]-pixels.data[111000])||(oldpixels.data[112000]-pixels.data[112000])||(oldpixels.data[113000]-pixels.data[113000])||(oldpixels.data[114000]-pixels.data[114000])||(oldpixels.data[115000]-pixels.data[115000])||(oldpixels.data[116000]-pixels.data[116000])||(oldpixels.data[117000]-pixels.data[117000])||(oldpixels.data[118000]-pixels.data[118000])||(oldpixels.data[119000]-pixels.data[119000])||(oldpixels.data[120000]-pixels.data[120000])||(oldpixels.data[121000]-pixels.data[121000])||(oldpixels.data[122000]-pixels.data[122000])||(oldpixels.data[123000]-pixels.data[123000])||(oldpixels.data[124000]-pixels.data[124000])||(oldpixels.data[125000]-pixels.data[125000])||(oldpixels.data[126000]-pixels.data[126000])||(oldpixels.data[127000]-pixels.data[127000])||(oldpixels.data[128000]-pixels.data[128000])||(oldpixels.data[129000]-pixels.data[129000])||(oldpixels.data[130000]-pixels.data[130000])||(oldpixels.data[131000]-pixels.data[131000])||(oldpixels.data[132000]-pixels.data[132000])||(oldpixels.data[133000]-pixels.data[133000])||(oldpixels.data[134000]-pixels.data[134000])||(oldpixels.data[135000]-pixels.data[135000])||(oldpixels.data[136000]-pixels.data[136000])||(oldpixels.data[137000]-pixels.data[137000])||(oldpixels.data[138000]-pixels.data[138000])||(oldpixels.data[139000]-pixels.data[139000])||(oldpixels.data[140000]-pixels.data[140000])||(oldpixels.data[141000]-pixels.data[141000])||(oldpixels.data[142000]-pixels.data[142000])||(oldpixels.data[143000]-pixels.data[143000])||(oldpixels.data[144000]-pixels.data[144000])||(oldpixels.data[145000]-pixels.data[145000])||(oldpixels.data[146000]-pixels.data[146000])||(oldpixels.data[147000]-pixels.data[147000])||(oldpixels.data[148000]-pixels.data[148000])||(oldpixels.data[149000]-pixels.data[149000])||(oldpixels.data[150000]-pixels.data[150000])||(oldpixels.data[151000]-pixels.data[151000])||(oldpixels.data[152000]-pixels.data[152000])||(oldpixels.data[153000]-pixels.data[153000])||(oldpixels.data[154000]-pixels.data[154000])||(oldpixels.data[155000]-pixels.data[155000])||(oldpixels.data[156000]-pixels.data[156000])||(oldpixels.data[157000]-pixels.data[157000])||(oldpixels.data[158000]-pixels.data[158000])||(oldpixels.data[159000]-pixels.data[159000])||(oldpixels.data[160000]-pixels.data[160000])||(oldpixels.data[161000]-pixels.data[161000])||(oldpixels.data[162000]-pixels.data[162000])||(oldpixels.data[163000]-pixels.data[163000])||(oldpixels.data[164000]-pixels.data[164000])||(oldpixels.data[165000]-pixels.data[165000])||(oldpixels.data[166000]-pixels.data[166000])||(oldpixels.data[167000]-pixels.data[167000])||(oldpixels.data[168000]-pixels.data[168000])||(oldpixels.data[169000]-pixels.data[169000])||(oldpixels.data[170000]-pixels.data[170000])||(oldpixels.data[171000]-pixels.data[171000])||(oldpixels.data[172000]-pixels.data[172000])||(oldpixels.data[173000]-pixels.data[173000])||(oldpixels.data[174000]-pixels.data[174000])||(oldpixels.data[175000]-pixels.data[175000])||(oldpixels.data[176000]-pixels.data[176000])||(oldpixels.data[177000]-pixels.data[177000])||(oldpixels.data[178000]-pixels.data[178000])||(oldpixels.data[179000]-pixels.data[179000])||(oldpixels.data[180000]-pixels.data[180000])||(oldpixels.data[181000]-pixels.data[181000])||(oldpixels.data[182000]-pixels.data[182000])||(oldpixels.data[183000]-pixels.data[183000])||(oldpixels.data[184000]-pixels.data[184000])||(oldpixels.data[185000]-pixels.data[185000])||(oldpixels.data[186000]-pixels.data[186000])||(oldpixels.data[187000]-pixels.data[187000])||(oldpixels.data[188000]-pixels.data[188000])||(oldpixels.data[189000]-pixels.data[189000])||(oldpixels.data[190000]-pixels.data[190000])||(oldpixels.data[191000]-pixels.data[191000])||(oldpixels.data[192000]-pixels.data[192000])||(oldpixels.data[193000]-pixels.data[193000])||(oldpixels.data[194000]-pixels.data[194000])||(oldpixels.data[195000]-pixels.data[195000])||(oldpixels.data[196000]-pixels.data[196000])||(oldpixels.data[197000]-pixels.data[197000])||(oldpixels.data[198000]-pixels.data[198000])||(oldpixels.data[199000]-pixels.data[199000])||(oldpixels.data[200000]-pixels.data[200000])||(oldpixels.data[201000]-pixels.data[201000])||(oldpixels.data[202000]-pixels.data[202000])||(oldpixels.data[203000]-pixels.data[203000])||(oldpixels.data[204000]-pixels.data[204000])||(oldpixels.data[205000]-pixels.data[205000])||(oldpixels.data[206000]-pixels.data[206000])||(oldpixels.data[207000]-pixels.data[207000])||(oldpixels.data[208000]-pixels.data[208000])||(oldpixels.data[209000]-pixels.data[209000])||(oldpixels.data[210000]-pixels.data[210000])||(oldpixels.data[211000]-pixels.data[211000])||(oldpixels.data[212000]-pixels.data[212000])||(oldpixels.data[213000]-pixels.data[213000])||(oldpixels.data[214000]-pixels.data[214000])||(oldpixels.data[215000]-pixels.data[215000])||(oldpixels.data[216000]-pixels.data[216000])||(oldpixels.data[217000]-pixels.data[217000])||(oldpixels.data[218000]-pixels.data[218000])||(oldpixels.data[219000]-pixels.data[219000])||(oldpixels.data[220000]-pixels.data[220000])||(oldpixels.data[221000]-pixels.data[221000])||(oldpixels.data[222000]-pixels.data[222000])||(oldpixels.data[223000]-pixels.data[223000])||(oldpixels.data[224000]-pixels.data[224000])||(oldpixels.data[225000]-pixels.data[225000])||(oldpixels.data[226000]-pixels.data[226000])||(oldpixels.data[227000]-pixels.data[227000])||(oldpixels.data[228000]-pixels.data[228000])||(oldpixels.data[229000]-pixels.data[229000])||(oldpixels.data[230000]-pixels.data[230000])||(oldpixels.data[231000]-pixels.data[231000])||(oldpixels.data[232000]-pixels.data[232000])||(oldpixels.data[233000]-pixels.data[233000])||(oldpixels.data[234000]-pixels.data[234000])||(oldpixels.data[235000]-pixels.data[235000])||(oldpixels.data[236000]-pixels.data[236000])||(oldpixels.data[237000]-pixels.data[237000])||(oldpixels.data[238000]-pixels.data[238000])||(oldpixels.data[239000]-pixels.data[239000])||(oldpixels.data[240000]-pixels.data[240000])||(oldpixels.data[241000]-pixels.data[241000])||(oldpixels.data[242000]-pixels.data[242000])||(oldpixels.data[243000]-pixels.data[243000])||(oldpixels.data[244000]-pixels.data[244000])||(oldpixels.data[245000]-pixels.data[245000])||(oldpixels.data[246000]-pixels.data[246000])||(oldpixels.data[247000]-pixels.data[247000])||(oldpixels.data[248000]-pixels.data[248000])||(oldpixels.data[249000]-pixels.data[249000])||(oldpixels.data[250000]-pixels.data[250000])||(oldpixels.data[251000]-pixels.data[251000])||(oldpixels.data[252000]-pixels.data[252000])||(oldpixels.data[253000]-pixels.data[253000])||(oldpixels.data[254000]-pixels.data[254000])||(oldpixels.data[255000]-pixels.data[255000])||(oldpixels.data[256000]-pixels.data[256000])||(oldpixels.data[257000]-pixels.data[257000])||(oldpixels.data[258000]-pixels.data[258000])||(oldpixels.data[259000]-pixels.data[259000])||(oldpixels.data[260000]-pixels.data[260000])||(oldpixels.data[261000]-pixels.data[261000])||(oldpixels.data[262000]-pixels.data[262000])||(oldpixels.data[263000]-pixels.data[263000])||(oldpixels.data[264000]-pixels.data[264000])||(oldpixels.data[265000]-pixels.data[265000])||(oldpixels.data[266000]-pixels.data[266000])||(oldpixels.data[267000]-pixels.data[267000])||(oldpixels.data[268000]-pixels.data[268000])||(oldpixels.data[269000]-pixels.data[269000])||(oldpixels.data[270000]-pixels.data[270000])||(oldpixels.data[271000]-pixels.data[271000])||(oldpixels.data[272000]-pixels.data[272000])||(oldpixels.data[273000]-pixels.data[273000])||(oldpixels.data[274000]-pixels.data[274000])||(oldpixels.data[275000]-pixels.data[275000])||(oldpixels.data[276000]-pixels.data[276000])||(oldpixels.data[277000]-pixels.data[277000])||(oldpixels.data[278000]-pixels.data[278000])||(oldpixels.data[279000]-pixels.data[279000])||(oldpixels.data[280000]-pixels.data[280000])||(oldpixels.data[281000]-pixels.data[281000])||(oldpixels.data[282000]-pixels.data[282000])||(oldpixels.data[283000]-pixels.data[283000])||(oldpixels.data[284000]-pixels.data[284000])||(oldpixels.data[285000]-pixels.data[285000])||(oldpixels.data[286000]-pixels.data[286000])||(oldpixels.data[287000]-pixels.data[287000])||(oldpixels.data[288000]-pixels.data[288000])||(oldpixels.data[289000]-pixels.data[289000])||(oldpixels.data[290000]-pixels.data[290000])||(oldpixels.data[291000]-pixels.data[291000])||(oldpixels.data[292000]-pixels.data[292000])||(oldpixels.data[293000]-pixels.data[293000])||(oldpixels.data[294000]-pixels.data[294000])||(oldpixels.data[295000]-pixels.data[295000])||(oldpixels.data[296000]-pixels.data[296000])||(oldpixels.data[297000]-pixels.data[297000])||(oldpixels.data[298000]-pixels.data[298000])||(oldpixels.data[299000]-pixels.data[299000])||(oldpixels.data[300000]-pixels.data[300000])||(oldpixels.data[301000]-pixels.data[301000])||(oldpixels.data[302000]-pixels.data[302000])||(oldpixels.data[303000]-pixels.data[303000])||(oldpixels.data[304000]-pixels.data[304000])||(oldpixels.data[305000]-pixels.data[305000])||(oldpixels.data[306000]-pixels.data[306000])||(oldpixels.data[307000]-pixels.data[307000])||(oldpixels.data[308000]-pixels.data[308000])||(oldpixels.data[309000]-pixels.data[309000])||(oldpixels.data[310000]-pixels.data[310000])||(oldpixels.data[311000]-pixels.data[311000])||(oldpixels.data[312000]-pixels.data[312000])||(oldpixels.data[313000]-pixels.data[313000])||(oldpixels.data[314000]-pixels.data[314000])||(oldpixels.data[315000]-pixels.data[315000])||(oldpixels.data[316000]-pixels.data[316000])||(oldpixels.data[317000]-pixels.data[317000])||(oldpixels.data[318000]-pixels.data[318000])||(oldpixels.data[319000]-pixels.data[319000])||(oldpixels.data[320000]-pixels.data[320000])||(oldpixels.data[321000]-pixels.data[321000])||(oldpixels.data[322000]-pixels.data[322000])||(oldpixels.data[323000]-pixels.data[323000])||(oldpixels.data[324000]-pixels.data[324000])||(oldpixels.data[325000]-pixels.data[325000])||(oldpixels.data[326000]-pixels.data[326000])||(oldpixels.data[327000]-pixels.data[327000])||(oldpixels.data[328000]-pixels.data[328000])||(oldpixels.data[329000]-pixels.data[329000])||(oldpixels.data[330000]-pixels.data[330000])||(oldpixels.data[331000]-pixels.data[331000])||(oldpixels.data[332000]-pixels.data[332000])||(oldpixels.data[333000]-pixels.data[333000])||(oldpixels.data[334000]-pixels.data[334000])||(oldpixels.data[335000]-pixels.data[335000])||(oldpixels.data[336000]-pixels.data[336000])||(oldpixels.data[337000]-pixels.data[337000])||(oldpixels.data[338000]-pixels.data[338000])||(oldpixels.data[339000]-pixels.data[339000])||(oldpixels.data[340000]-pixels.data[340000])||(oldpixels.data[341000]-pixels.data[341000])||(oldpixels.data[342000]-pixels.data[342000])||(oldpixels.data[343000]-pixels.data[343000])||(oldpixels.data[344000]-pixels.data[344000])||(oldpixels.data[345000]-pixels.data[345000])||(oldpixels.data[346000]-pixels.data[346000])||(oldpixels.data[347000]-pixels.data[347000])||(oldpixels.data[348000]-pixels.data[348000])||(oldpixels.data[349000]-pixels.data[349000])||(oldpixels.data[350000]-pixels.data[350000])||(oldpixels.data[351000]-pixels.data[351000])||(oldpixels.data[352000]-pixels.data[352000])||(oldpixels.data[353000]-pixels.data[353000])||(oldpixels.data[354000]-pixels.data[354000])||(oldpixels.data[355000]-pixels.data[355000])||(oldpixels.data[356000]-pixels.data[356000])||(oldpixels.data[357000]-pixels.data[357000])||(oldpixels.data[358000]-pixels.data[358000])||(oldpixels.data[359000]-pixels.data[359000])||(oldpixels.data[360000]-pixels.data[360000])||(oldpixels.data[361000]-pixels.data[361000])||(oldpixels.data[362000]-pixels.data[362000])||(oldpixels.data[363000]-pixels.data[363000])||(oldpixels.data[364000]-pixels.data[364000])||(oldpixels.data[365000]-pixels.data[365000])||(oldpixels.data[366000]-pixels.data[366000])||(oldpixels.data[367000]-pixels.data[367000])||(oldpixels.data[368000]-pixels.data[368000])||(oldpixels.data[369000]-pixels.data[369000])||(oldpixels.data[370000]-pixels.data[370000])||(oldpixels.data[371000]-pixels.data[371000])||(oldpixels.data[372000]-pixels.data[372000])||(oldpixels.data[373000]-pixels.data[373000])||(oldpixels.data[374000]-pixels.data[374000])||(oldpixels.data[375000]-pixels.data[375000])||(oldpixels.data[376000]-pixels.data[376000])||(oldpixels.data[377000]-pixels.data[377000])||(oldpixels.data[378000]-pixels.data[378000])||(oldpixels.data[379000]-pixels.data[379000])||(oldpixels.data[380000]-pixels.data[380000])||(oldpixels.data[381000]-pixels.data[381000])||(oldpixels.data[382000]-pixels.data[382000])||(oldpixels.data[383000]-pixels.data[383000])||(oldpixels.data[384000]-pixels.data[384000])||(oldpixels.data[385000]-pixels.data[385000])||(oldpixels.data[386000]-pixels.data[386000])||(oldpixels.data[387000]-pixels.data[387000])||(oldpixels.data[388000]-pixels.data[388000])||(oldpixels.data[389000]-pixels.data[389000])||(oldpixels.data[390000]-pixels.data[390000])||(oldpixels.data[391000]-pixels.data[391000])||(oldpixels.data[392000]-pixels.data[392000])||(oldpixels.data[393000]-pixels.data[393000])||(oldpixels.data[394000]-pixels.data[394000])||(oldpixels.data[395000]-pixels.data[395000])||(oldpixels.data[396000]-pixels.data[396000])||(oldpixels.data[397000]-pixels.data[397000])||(oldpixels.data[398000]-pixels.data[398000])||(oldpixels.data[399000]-pixels.data[399000])||(oldpixels.data[400000]-pixels.data[400000])||(oldpixels.data[401000]-pixels.data[401000])||(oldpixels.data[402000]-pixels.data[402000])||(oldpixels.data[403000]-pixels.data[403000])||(oldpixels.data[404000]-pixels.data[404000])||(oldpixels.data[405000]-pixels.data[405000])||(oldpixels.data[406000]-pixels.data[406000])||(oldpixels.data[407000]-pixels.data[407000])||(oldpixels.data[408000]-pixels.data[408000])||(oldpixels.data[409000]-pixels.data[409000])||(oldpixels.data[410000]-pixels.data[410000])||(oldpixels.data[411000]-pixels.data[411000])||(oldpixels.data[412000]-pixels.data[412000])||(oldpixels.data[413000]-pixels.data[413000])||(oldpixels.data[414000]-pixels.data[414000])||(oldpixels.data[415000]-pixels.data[415000])||(oldpixels.data[416000]-pixels.data[416000])||(oldpixels.data[417000]-pixels.data[417000])||(oldpixels.data[418000]-pixels.data[418000])||(oldpixels.data[419000]-pixels.data[419000])||(oldpixels.data[420000]-pixels.data[420000])||(oldpixels.data[421000]-pixels.data[421000])||(oldpixels.data[422000]-pixels.data[422000])||(oldpixels.data[423000]-pixels.data[423000])||(oldpixels.data[424000]-pixels.data[424000])||(oldpixels.data[425000]-pixels.data[425000])||(oldpixels.data[426000]-pixels.data[426000])||(oldpixels.data[427000]-pixels.data[427000])||(oldpixels.data[428000]-pixels.data[428000])||(oldpixels.data[429000]-pixels.data[429000])||(oldpixels.data[430000]-pixels.data[430000])||(oldpixels.data[431000]-pixels.data[431000])||(oldpixels.data[432000]-pixels.data[432000])||(oldpixels.data[433000]-pixels.data[433000])||(oldpixels.data[434000]-pixels.data[434000])||(oldpixels.data[435000]-pixels.data[435000])||(oldpixels.data[436000]-pixels.data[436000])||(oldpixels.data[437000]-pixels.data[437000])||(oldpixels.data[438000]-pixels.data[438000])||(oldpixels.data[439000]-pixels.data[439000])||(oldpixels.data[440000]-pixels.data[440000])||(oldpixels.data[441000]-pixels.data[441000])||(oldpixels.data[442000]-pixels.data[442000])||(oldpixels.data[443000]-pixels.data[443000])||(oldpixels.data[444000]-pixels.data[444000])||(oldpixels.data[445000]-pixels.data[445000])||(oldpixels.data[446000]-pixels.data[446000])||(oldpixels.data[447000]-pixels.data[447000])||(oldpixels.data[448000]-pixels.data[448000])||(oldpixels.data[449000]-pixels.data[449000])||(oldpixels.data[450000]-pixels.data[450000])||(oldpixels.data[451000]-pixels.data[451000])||(oldpixels.data[452000]-pixels.data[452000])||(oldpixels.data[453000]-pixels.data[453000])||(oldpixels.data[454000]-pixels.data[454000])||(oldpixels.data[455000]-pixels.data[455000])||(oldpixels.data[456000]-pixels.data[456000])||(oldpixels.data[457000]-pixels.data[457000])||(oldpixels.data[458000]-pixels.data[458000])||(oldpixels.data[459000]-pixels.data[459000])||(oldpixels.data[460000]-pixels.data[460000])||(oldpixels.data[461000]-pixels.data[461000])||(oldpixels.data[462000]-pixels.data[462000])||(oldpixels.data[463000]-pixels.data[463000])||(oldpixels.data[464000]-pixels.data[464000])||(oldpixels.data[465000]-pixels.data[465000])||(oldpixels.data[466000]-pixels.data[466000])||(oldpixels.data[467000]-pixels.data[467000])||(oldpixels.data[468000]-pixels.data[468000])||(oldpixels.data[469000]-pixels.data[469000])||(oldpixels.data[470000]-pixels.data[470000])||(oldpixels.data[471000]-pixels.data[471000])||(oldpixels.data[472000]-pixels.data[472000])||(oldpixels.data[473000]-pixels.data[473000])||(oldpixels.data[474000]-pixels.data[474000])||(oldpixels.data[475000]-pixels.data[475000])||(oldpixels.data[476000]-pixels.data[476000])||(oldpixels.data[477000]-pixels.data[477000])||(oldpixels.data[478000]-pixels.data[478000])||(oldpixels.data[479000]-pixels.data[479000])||(oldpixels.data[480000]-pixels.data[480000])||(oldpixels.data[481000]-pixels.data[481000])||(oldpixels.data[482000]-pixels.data[482000])||(oldpixels.data[483000]-pixels.data[483000])||(oldpixels.data[484000]-pixels.data[484000])||(oldpixels.data[485000]-pixels.data[485000])||(oldpixels.data[486000]-pixels.data[486000])||(oldpixels.data[487000]-pixels.data[487000])||(oldpixels.data[488000]-pixels.data[488000])||(oldpixels.data[489000]-pixels.data[489000])||(oldpixels.data[490000]-pixels.data[490000])||(oldpixels.data[491000]-pixels.data[491000])||(oldpixels.data[492000]-pixels.data[492000])||(oldpixels.data[493000]-pixels.data[493000])||(oldpixels.data[494000]-pixels.data[494000])||(oldpixels.data[495000]-pixels.data[495000])||(oldpixels.data[496000]-pixels.data[496000])||(oldpixels.data[497000]-pixels.data[497000])||(oldpixels.data[498000]-pixels.data[498000])||(oldpixels.data[499000]-pixels.data[499000])||(oldpixels.data[500000]-pixels.data[500000])||(oldpixels.data[501000]-pixels.data[501000])||(oldpixels.data[502000]-pixels.data[502000])||(oldpixels.data[503000]-pixels.data[503000])||(oldpixels.data[504000]-pixels.data[504000])||(oldpixels.data[505000]-pixels.data[505000])||(oldpixels.data[506000]-pixels.data[506000])||(oldpixels.data[507000]-pixels.data[507000])||(oldpixels.data[508000]-pixels.data[508000])||(oldpixels.data[509000]-pixels.data[509000])||(oldpixels.data[510000]-pixels.data[510000])||(oldpixels.data[511000]-pixels.data[511000])||(oldpixels.data[512000]-pixels.data[512000])||(oldpixels.data[513000]-pixels.data[513000])||(oldpixels.data[514000]-pixels.data[514000])||(oldpixels.data[515000]-pixels.data[515000])||(oldpixels.data[516000]-pixels.data[516000])||(oldpixels.data[517000]-pixels.data[517000])||(oldpixels.data[518000]-pixels.data[518000])||(oldpixels.data[519000]-pixels.data[519000])||(oldpixels.data[520000]-pixels.data[520000])||(oldpixels.data[521000]-pixels.data[521000])||(oldpixels.data[522000]-pixels.data[522000])||(oldpixels.data[523000]-pixels.data[523000])||(oldpixels.data[524000]-pixels.data[524000])||(oldpixels.data[525000]-pixels.data[525000])||(oldpixels.data[526000]-pixels.data[526000])||(oldpixels.data[527000]-pixels.data[527000])||(oldpixels.data[528000]-pixels.data[528000])||(oldpixels.data[529000]-pixels.data[529000])||(oldpixels.data[530000]-pixels.data[530000])||(oldpixels.data[531000]-pixels.data[531000])||(oldpixels.data[532000]-pixels.data[532000])||(oldpixels.data[533000]-pixels.data[533000])||(oldpixels.data[534000]-pixels.data[534000])||(oldpixels.data[535000]-pixels.data[535000])||(oldpixels.data[536000]-pixels.data[536000])||(oldpixels.data[537000]-pixels.data[537000])||(oldpixels.data[538000]-pixels.data[538000])||(oldpixels.data[539000]-pixels.data[539000])||(oldpixels.data[540000]-pixels.data[540000])||(oldpixels.data[541000]-pixels.data[541000])||(oldpixels.data[542000]-pixels.data[542000])||(oldpixels.data[543000]-pixels.data[543000])||(oldpixels.data[544000]-pixels.data[544000])||(oldpixels.data[545000]-pixels.data[545000])||(oldpixels.data[546000]-pixels.data[546000])||(oldpixels.data[547000]-pixels.data[547000])||(oldpixels.data[548000]-pixels.data[548000])||(oldpixels.data[549000]-pixels.data[549000])||(oldpixels.data[550000]-pixels.data[550000])||(oldpixels.data[551000]-pixels.data[551000])||(oldpixels.data[552000]-pixels.data[552000])||(oldpixels.data[553000]-pixels.data[553000])||(oldpixels.data[554000]-pixels.data[554000])||(oldpixels.data[555000]-pixels.data[555000])||(oldpixels.data[556000]-pixels.data[556000])||(oldpixels.data[557000]-pixels.data[557000])||(oldpixels.data[558000]-pixels.data[558000])||(oldpixels.data[559000]-pixels.data[559000])||(oldpixels.data[560000]-pixels.data[560000])||(oldpixels.data[561000]-pixels.data[561000])||(oldpixels.data[562000]-pixels.data[562000])||(oldpixels.data[563000]-pixels.data[563000])||(oldpixels.data[564000]-pixels.data[564000])||(oldpixels.data[565000]-pixels.data[565000])||(oldpixels.data[566000]-pixels.data[566000])||(oldpixels.data[567000]-pixels.data[567000])||(oldpixels.data[568000]-pixels.data[568000])||(oldpixels.data[569000]-pixels.data[569000])||(oldpixels.data[570000]-pixels.data[570000])||(oldpixels.data[571000]-pixels.data[571000])||(oldpixels.data[572000]-pixels.data[572000])||(oldpixels.data[573000]-pixels.data[573000])||(oldpixels.data[574000]-pixels.data[574000])||(oldpixels.data[575000]-pixels.data[575000])||(oldpixels.data[576000]-pixels.data[576000])||(oldpixels.data[577000]-pixels.data[577000])||(oldpixels.data[578000]-pixels.data[578000])||(oldpixels.data[579000]-pixels.data[579000])||(oldpixels.data[580000]-pixels.data[580000])||(oldpixels.data[581000]-pixels.data[581000])||(oldpixels.data[582000]-pixels.data[582000])||(oldpixels.data[583000]-pixels.data[583000])||(oldpixels.data[584000]-pixels.data[584000])||(oldpixels.data[585000]-pixels.data[585000])||(oldpixels.data[586000]-pixels.data[586000])||(oldpixels.data[587000]-pixels.data[587000])||(oldpixels.data[588000]-pixels.data[588000])||(oldpixels.data[589000]-pixels.data[589000])||(oldpixels.data[590000]-pixels.data[590000])||(oldpixels.data[591000]-pixels.data[591000])||(oldpixels.data[592000]-pixels.data[592000])||(oldpixels.data[593000]-pixels.data[593000])||(oldpixels.data[594000]-pixels.data[594000])||(oldpixels.data[595000]-pixels.data[595000])||(oldpixels.data[596000]-pixels.data[596000])||(oldpixels.data[597000]-pixels.data[597000])||(oldpixels.data[598000]-pixels.data[598000])||(oldpixels.data[599000]-pixels.data[599000])||(oldpixels.data[600000]-pixels.data[600000])||(oldpixels.data[601000]-pixels.data[601000])||(oldpixels.data[602000]-pixels.data[602000])||(oldpixels.data[603000]-pixels.data[603000])||(oldpixels.data[604000]-pixels.data[604000])||(oldpixels.data[605000]-pixels.data[605000])||(oldpixels.data[606000]-pixels.data[606000])||(oldpixels.data[607000]-pixels.data[607000])||(oldpixels.data[608000]-pixels.data[608000])||(oldpixels.data[609000]-pixels.data[609000])||(oldpixels.data[610000]-pixels.data[610000])||(oldpixels.data[611000]-pixels.data[611000])||(oldpixels.data[612000]-pixels.data[612000])||(oldpixels.data[613000]-pixels.data[613000])||(oldpixels.data[614000]-pixels.data[614000])||(oldpixels.data[615000]-pixels.data[615000])||(oldpixels.data[616000]-pixels.data[616000])||(oldpixels.data[617000]-pixels.data[617000])||(oldpixels.data[618000]-pixels.data[618000])||(oldpixels.data[619000]-pixels.data[619000])||(oldpixels.data[620000]-pixels.data[620000])||(oldpixels.data[621000]-pixels.data[621000])||(oldpixels.data[622000]-pixels.data[622000])||(oldpixels.data[623000]-pixels.data[623000])||(oldpixels.data[624000]-pixels.data[624000])||(oldpixels.data[625000]-pixels.data[625000])||(oldpixels.data[626000]-pixels.data[626000])||(oldpixels.data[627000]-pixels.data[627000])||(oldpixels.data[628000]-pixels.data[628000])||(oldpixels.data[629000]-pixels.data[629000])||(oldpixels.data[630000]-pixels.data[630000])||(oldpixels.data[631000]-pixels.data[631000])||(oldpixels.data[632000]-pixels.data[632000])||(oldpixels.data[633000]-pixels.data[633000])||(oldpixels.data[634000]-pixels.data[634000])||(oldpixels.data[635000]-pixels.data[635000])||(oldpixels.data[636000]-pixels.data[636000])||(oldpixels.data[637000]-pixels.data[637000])||(oldpixels.data[638000]-pixels.data[638000])||(oldpixels.data[639000]-pixels.data[639000])||(oldpixels.data[640000]-pixels.data[640000])||(oldpixels.data[641000]-pixels.data[641000])||(oldpixels.data[642000]-pixels.data[642000])||(oldpixels.data[643000]-pixels.data[643000])||(oldpixels.data[644000]-pixels.data[644000])||(oldpixels.data[645000]-pixels.data[645000])||(oldpixels.data[646000]-pixels.data[646000])||(oldpixels.data[647000]-pixels.data[647000])||(oldpixels.data[648000]-pixels.data[648000])||(oldpixels.data[649000]-pixels.data[649000])||(oldpixels.data[650000]-pixels.data[650000])||(oldpixels.data[651000]-pixels.data[651000])||(oldpixels.data[652000]-pixels.data[652000])||(oldpixels.data[653000]-pixels.data[653000])||(oldpixels.data[654000]-pixels.data[654000])||(oldpixels.data[655000]-pixels.data[655000])||(oldpixels.data[656000]-pixels.data[656000])||(oldpixels.data[657000]-pixels.data[657000])||(oldpixels.data[658000]-pixels.data[658000])||(oldpixels.data[659000]-pixels.data[659000])||(oldpixels.data[660000]-pixels.data[660000])||(oldpixels.data[661000]-pixels.data[661000])||(oldpixels.data[662000]-pixels.data[662000])||(oldpixels.data[663000]-pixels.data[663000])||(oldpixels.data[664000]-pixels.data[664000])||(oldpixels.data[665000]-pixels.data[665000])||(oldpixels.data[666000]-pixels.data[666000])||(oldpixels.data[667000]-pixels.data[667000])||(oldpixels.data[668000]-pixels.data[668000])||(oldpixels.data[669000]-pixels.data[669000])||(oldpixels.data[670000]-pixels.data[670000])||(oldpixels.data[671000]-pixels.data[671000])||(oldpixels.data[672000]-pixels.data[672000])||(oldpixels.data[673000]-pixels.data[673000])||(oldpixels.data[674000]-pixels.data[674000])||(oldpixels.data[675000]-pixels.data[675000])||(oldpixels.data[676000]-pixels.data[676000])||(oldpixels.data[677000]-pixels.data[677000])||(oldpixels.data[678000]-pixels.data[678000])||(oldpixels.data[679000]-pixels.data[679000])||(oldpixels.data[680000]-pixels.data[680000])||(oldpixels.data[681000]-pixels.data[681000])||(oldpixels.data[682000]-pixels.data[682000])||(oldpixels.data[683000]-pixels.data[683000])||(oldpixels.data[684000]-pixels.data[684000])||(oldpixels.data[685000]-pixels.data[685000])||(oldpixels.data[686000]-pixels.data[686000])||(oldpixels.data[687000]-pixels.data[687000])||(oldpixels.data[688000]-pixels.data[688000])||(oldpixels.data[689000]-pixels.data[689000])||(oldpixels.data[690000]-pixels.data[690000])||(oldpixels.data[691000]-pixels.data[691000])||(oldpixels.data[692000]-pixels.data[692000])||(oldpixels.data[693000]-pixels.data[693000])||(oldpixels.data[694000]-pixels.data[694000])||(oldpixels.data[695000]-pixels.data[695000])||(oldpixels.data[696000]-pixels.data[696000])||(oldpixels.data[697000]-pixels.data[697000])||(oldpixels.data[698000]-pixels.data[698000])||(oldpixels.data[699000]-pixels.data[699000])||(oldpixels.data[700000]-pixels.data[700000])||(oldpixels.data[701000]-pixels.data[701000])||(oldpixels.data[702000]-pixels.data[702000])||(oldpixels.data[703000]-pixels.data[703000])||(oldpixels.data[704000]-pixels.data[704000])||(oldpixels.data[705000]-pixels.data[705000])||(oldpixels.data[706000]-pixels.data[706000])||(oldpixels.data[707000]-pixels.data[707000])||(oldpixels.data[708000]-pixels.data[708000])||(oldpixels.data[709000]-pixels.data[709000])||(oldpixels.data[710000]-pixels.data[710000])||(oldpixels.data[711000]-pixels.data[711000])||(oldpixels.data[712000]-pixels.data[712000])||(oldpixels.data[713000]-pixels.data[713000])||(oldpixels.data[714000]-pixels.data[714000])||(oldpixels.data[715000]-pixels.data[715000])||(oldpixels.data[716000]-pixels.data[716000])||(oldpixels.data[717000]-pixels.data[717000])||(oldpixels.data[718000]-pixels.data[718000])||(oldpixels.data[719000]-pixels.data[719000])||(oldpixels.data[720000]-pixels.data[720000])||(oldpixels.data[721000]-pixels.data[721000])||(oldpixels.data[722000]-pixels.data[722000])||(oldpixels.data[723000]-pixels.data[723000])||(oldpixels.data[724000]-pixels.data[724000])||(oldpixels.data[725000]-pixels.data[725000])||(oldpixels.data[726000]-pixels.data[726000])||(oldpixels.data[727000]-pixels.data[727000])||(oldpixels.data[728000]-pixels.data[728000])||(oldpixels.data[729000]-pixels.data[729000])||(oldpixels.data[730000]-pixels.data[730000])||(oldpixels.data[731000]-pixels.data[731000])||(oldpixels.data[732000]-pixels.data[732000])||(oldpixels.data[733000]-pixels.data[733000])||(oldpixels.data[734000]-pixels.data[734000])||(oldpixels.data[735000]-pixels.data[735000])||(oldpixels.data[736000]-pixels.data[736000])||(oldpixels.data[737000]-pixels.data[737000])||(oldpixels.data[738000]-pixels.data[738000])||(oldpixels.data[739000]-pixels.data[739000])||(oldpixels.data[740000]-pixels.data[740000])||(oldpixels.data[741000]-pixels.data[741000])||(oldpixels.data[742000]-pixels.data[742000])||(oldpixels.data[743000]-pixels.data[743000])||(oldpixels.data[744000]-pixels.data[744000])||(oldpixels.data[745000]-pixels.data[745000])||(oldpixels.data[746000]-pixels.data[746000])||(oldpixels.data[747000]-pixels.data[747000])||(oldpixels.data[748000]-pixels.data[748000])||(oldpixels.data[749000]-pixels.data[749000])||(oldpixels.data[750000]-pixels.data[750000])||(oldpixels.data[751000]-pixels.data[751000])||(oldpixels.data[752000]-pixels.data[752000])||(oldpixels.data[753000]-pixels.data[753000])||(oldpixels.data[754000]-pixels.data[754000])||(oldpixels.data[755000]-pixels.data[755000])||(oldpixels.data[756000]-pixels.data[756000])||(oldpixels.data[757000]-pixels.data[757000])||(oldpixels.data[758000]-pixels.data[758000])||(oldpixels.data[759000]-pixels.data[759000])||(oldpixels.data[760000]-pixels.data[760000])||(oldpixels.data[761000]-pixels.data[761000])||(oldpixels.data[762000]-pixels.data[762000])||(oldpixels.data[763000]-pixels.data[763000])||(oldpixels.data[764000]-pixels.data[764000])||(oldpixels.data[765000]-pixels.data[765000])||(oldpixels.data[766000]-pixels.data[766000])||(oldpixels.data[767000]-pixels.data[767000])||(oldpixels.data[768000]-pixels.data[768000])||(oldpixels.data[769000]-pixels.data[769000])||(oldpixels.data[770000]-pixels.data[770000])||(oldpixels.data[771000]-pixels.data[771000])||(oldpixels.data[772000]-pixels.data[772000])||(oldpixels.data[773000]-pixels.data[773000])||(oldpixels.data[774000]-pixels.data[774000])||(oldpixels.data[775000]-pixels.data[775000])||(oldpixels.data[776000]-pixels.data[776000])||(oldpixels.data[777000]-pixels.data[777000])||(oldpixels.data[778000]-pixels.data[778000])||(oldpixels.data[779000]-pixels.data[779000])||(oldpixels.data[780000]-pixels.data[780000])||(oldpixels.data[781000]-pixels.data[781000])||(oldpixels.data[782000]-pixels.data[782000])||(oldpixels.data[783000]-pixels.data[783000])||(oldpixels.data[784000]-pixels.data[784000])||(oldpixels.data[785000]-pixels.data[785000])||(oldpixels.data[786000]-pixels.data[786000])||(oldpixels.data[787000]-pixels.data[787000])||(oldpixels.data[788000]-pixels.data[788000])||(oldpixels.data[789000]-pixels.data[789000])||(oldpixels.data[790000]-pixels.data[790000])||(oldpixels.data[791000]-pixels.data[791000])||(oldpixels.data[792000]-pixels.data[792000])||(oldpixels.data[793000]-pixels.data[793000])||(oldpixels.data[794000]-pixels.data[794000])||(oldpixels.data[795000]-pixels.data[795000])||(oldpixels.data[796000]-pixels.data[796000])||(oldpixels.data[797000]-pixels.data[797000])||(oldpixels.data[798000]-pixels.data[798000])||(oldpixels.data[799000]-pixels.data[799000])||(oldpixels.data[800000]-pixels.data[800000])||(oldpixels.data[801000]-pixels.data[801000])||(oldpixels.data[802000]-pixels.data[802000])||(oldpixels.data[803000]-pixels.data[803000])||(oldpixels.data[804000]-pixels.data[804000])||(oldpixels.data[805000]-pixels.data[805000])||(oldpixels.data[806000]-pixels.data[806000])||(oldpixels.data[807000]-pixels.data[807000])||(oldpixels.data[808000]-pixels.data[808000])||(oldpixels.data[809000]-pixels.data[809000])||(oldpixels.data[810000]-pixels.data[810000])||(oldpixels.data[811000]-pixels.data[811000])||(oldpixels.data[812000]-pixels.data[812000])||(oldpixels.data[813000]-pixels.data[813000])||(oldpixels.data[814000]-pixels.data[814000])||(oldpixels.data[815000]-pixels.data[815000])||(oldpixels.data[816000]-pixels.data[816000])||(oldpixels.data[817000]-pixels.data[817000])||(oldpixels.data[818000]-pixels.data[818000])||(oldpixels.data[819000]-pixels.data[819000])||(oldpixels.data[820000]-pixels.data[820000])||(oldpixels.data[821000]-pixels.data[821000])||(oldpixels.data[822000]-pixels.data[822000])||(oldpixels.data[823000]-pixels.data[823000])||(oldpixels.data[824000]-pixels.data[824000])||(oldpixels.data[825000]-pixels.data[825000])||(oldpixels.data[826000]-pixels.data[826000])||(oldpixels.data[827000]-pixels.data[827000])||(oldpixels.data[828000]-pixels.data[828000])||(oldpixels.data[829000]-pixels.data[829000])||(oldpixels.data[830000]-pixels.data[830000])||(oldpixels.data[831000]-pixels.data[831000])||(oldpixels.data[832000]-pixels.data[832000])||(oldpixels.data[833000]-pixels.data[833000])||(oldpixels.data[834000]-pixels.data[834000])||(oldpixels.data[835000]-pixels.data[835000])||(oldpixels.data[836000]-pixels.data[836000])||(oldpixels.data[837000]-pixels.data[837000])||(oldpixels.data[838000]-pixels.data[838000])||(oldpixels.data[839000]-pixels.data[839000])||(oldpixels.data[840000]-pixels.data[840000])||(oldpixels.data[841000]-pixels.data[841000])||(oldpixels.data[842000]-pixels.data[842000])||(oldpixels.data[843000]-pixels.data[843000])||(oldpixels.data[844000]-pixels.data[844000])||(oldpixels.data[845000]-pixels.data[845000])||(oldpixels.data[846000]-pixels.data[846000])||(oldpixels.data[847000]-pixels.data[847000])||(oldpixels.data[848000]-pixels.data[848000])||(oldpixels.data[849000]-pixels.data[849000])||(oldpixels.data[850000]-pixels.data[850000])||(oldpixels.data[851000]-pixels.data[851000])||(oldpixels.data[852000]-pixels.data[852000])||(oldpixels.data[853000]-pixels.data[853000])||(oldpixels.data[854000]-pixels.data[854000])||(oldpixels.data[855000]-pixels.data[855000])||(oldpixels.data[856000]-pixels.data[856000])||(oldpixels.data[857000]-pixels.data[857000])||(oldpixels.data[858000]-pixels.data[858000])||(oldpixels.data[859000]-pixels.data[859000])||(oldpixels.data[860000]-pixels.data[860000])||(oldpixels.data[861000]-pixels.data[861000])||(oldpixels.data[862000]-pixels.data[862000])||(oldpixels.data[863000]-pixels.data[863000])||(oldpixels.data[864000]-pixels.data[864000])||(oldpixels.data[865000]-pixels.data[865000])||(oldpixels.data[866000]-pixels.data[866000])||(oldpixels.data[867000]-pixels.data[867000])||(oldpixels.data[868000]-pixels.data[868000])||(oldpixels.data[869000]-pixels.data[869000])||(oldpixels.data[870000]-pixels.data[870000])||(oldpixels.data[871000]-pixels.data[871000])||(oldpixels.data[872000]-pixels.data[872000])||(oldpixels.data[873000]-pixels.data[873000])||(oldpixels.data[874000]-pixels.data[874000])||(oldpixels.data[875000]-pixels.data[875000])||(oldpixels.data[876000]-pixels.data[876000])||(oldpixels.data[877000]-pixels.data[877000])||(oldpixels.data[878000]-pixels.data[878000])||(oldpixels.data[879000]-pixels.data[879000])||(oldpixels.data[880000]-pixels.data[880000])||(oldpixels.data[881000]-pixels.data[881000])||(oldpixels.data[882000]-pixels.data[882000])||(oldpixels.data[883000]-pixels.data[883000])||(oldpixels.data[884000]-pixels.data[884000])||(oldpixels.data[885000]-pixels.data[885000])||(oldpixels.data[886000]-pixels.data[886000])||(oldpixels.data[887000]-pixels.data[887000])||(oldpixels.data[888000]-pixels.data[888000])||(oldpixels.data[889000]-pixels.data[889000])||(oldpixels.data[890000]-pixels.data[890000])||(oldpixels.data[891000]-pixels.data[891000])||(oldpixels.data[892000]-pixels.data[892000])||(oldpixels.data[893000]-pixels.data[893000])||(oldpixels.data[894000]-pixels.data[894000])||(oldpixels.data[895000]-pixels.data[895000])||(oldpixels.data[896000]-pixels.data[896000])||(oldpixels.data[897000]-pixels.data[897000])||(oldpixels.data[898000]-pixels.data[898000])||(oldpixels.data[899000]-pixels.data[899000])||(oldpixels.data[900000]-pixels.data[900000])||(oldpixels.data[901000]-pixels.data[901000])||(oldpixels.data[902000]-pixels.data[902000])||(oldpixels.data[903000]-pixels.data[903000])||(oldpixels.data[904000]-pixels.data[904000])||(oldpixels.data[905000]-pixels.data[905000])||(oldpixels.data[906000]-pixels.data[906000])||(oldpixels.data[907000]-pixels.data[907000])||(oldpixels.data[908000]-pixels.data[908000])||(oldpixels.data[909000]-pixels.data[909000])||(oldpixels.data[910000]-pixels.data[910000])||(oldpixels.data[911000]-pixels.data[911000])||(oldpixels.data[912000]-pixels.data[912000])||(oldpixels.data[913000]-pixels.data[913000])||(oldpixels.data[914000]-pixels.data[914000])||(oldpixels.data[915000]-pixels.data[915000])||(oldpixels.data[916000]-pixels.data[916000])||(oldpixels.data[917000]-pixels.data[917000])||(oldpixels.data[918000]-pixels.data[918000])||(oldpixels.data[919000]-pixels.data[919000])||(oldpixels.data[920000]-pixels.data[920000])||(oldpixels.data[921000]-pixels.data[921000])||(oldpixels.data[922000]-pixels.data[922000])||(oldpixels.data[923000]-pixels.data[923000])||(oldpixels.data[924000]-pixels.data[924000])||(oldpixels.data[925000]-pixels.data[925000])||(oldpixels.data[926000]-pixels.data[926000])||(oldpixels.data[927000]-pixels.data[927000])||(oldpixels.data[928000]-pixels.data[928000])||(oldpixels.data[929000]-pixels.data[929000])||(oldpixels.data[930000]-pixels.data[930000])||(oldpixels.data[931000]-pixels.data[931000])||(oldpixels.data[932000]-pixels.data[932000])||(oldpixels.data[933000]-pixels.data[933000])||(oldpixels.data[934000]-pixels.data[934000])||(oldpixels.data[935000]-pixels.data[935000])||(oldpixels.data[936000]-pixels.data[936000])||(oldpixels.data[937000]-pixels.data[937000])||(oldpixels.data[938000]-pixels.data[938000])||(oldpixels.data[939000]-pixels.data[939000])||(oldpixels.data[940000]-pixels.data[940000])||(oldpixels.data[941000]-pixels.data[941000])||(oldpixels.data[942000]-pixels.data[942000])||(oldpixels.data[943000]-pixels.data[943000])||(oldpixels.data[944000]-pixels.data[944000])||(oldpixels.data[945000]-pixels.data[945000])||(oldpixels.data[946000]-pixels.data[946000])||(oldpixels.data[947000]-pixels.data[947000])||(oldpixels.data[948000]-pixels.data[948000])||(oldpixels.data[949000]-pixels.data[949000])||(oldpixels.data[950000]-pixels.data[950000])||(oldpixels.data[951000]-pixels.data[951000])||(oldpixels.data[952000]-pixels.data[952000])||(oldpixels.data[953000]-pixels.data[953000])||(oldpixels.data[954000]-pixels.data[954000])||(oldpixels.data[955000]-pixels.data[955000])||(oldpixels.data[956000]-pixels.data[956000])||(oldpixels.data[957000]-pixels.data[957000])||(oldpixels.data[958000]-pixels.data[958000])||(oldpixels.data[959000]-pixels.data[959000])||(oldpixels.data[960000]-pixels.data[960000])||(oldpixels.data[961000]-pixels.data[961000])||(oldpixels.data[962000]-pixels.data[962000])||(oldpixels.data[963000]-pixels.data[963000])||(oldpixels.data[964000]-pixels.data[964000])||(oldpixels.data[965000]-pixels.data[965000])||(oldpixels.data[966000]-pixels.data[966000])||(oldpixels.data[967000]-pixels.data[967000])||(oldpixels.data[968000]-pixels.data[968000])||(oldpixels.data[969000]-pixels.data[969000])||(oldpixels.data[970000]-pixels.data[970000])||(oldpixels.data[971000]-pixels.data[971000])||(oldpixels.data[972000]-pixels.data[972000])||(oldpixels.data[973000]-pixels.data[973000])||(oldpixels.data[974000]-pixels.data[974000])||(oldpixels.data[975000]-pixels.data[975000])||(oldpixels.data[976000]-pixels.data[976000])||(oldpixels.data[977000]-pixels.data[977000])||(oldpixels.data[978000]-pixels.data[978000])||(oldpixels.data[979000]-pixels.data[979000])||(oldpixels.data[980000]-pixels.data[980000])||(oldpixels.data[981000]-pixels.data[981000])||(oldpixels.data[982000]-pixels.data[982000])||(oldpixels.data[983000]-pixels.data[983000])||(oldpixels.data[984000]-pixels.data[984000])||(oldpixels.data[985000]-pixels.data[985000])||(oldpixels.data[986000]-pixels.data[986000])||(oldpixels.data[987000]-pixels.data[987000])||(oldpixels.data[988000]-pixels.data[988000])||(oldpixels.data[989000]-pixels.data[989000])||(oldpixels.data[990000]-pixels.data[990000])||(oldpixels.data[991000]-pixels.data[991000])||(oldpixels.data[992000]-pixels.data[992000])||(oldpixels.data[993000]-pixels.data[993000])||(oldpixels.data[994000]-pixels.data[994000])||(oldpixels.data[995000]-pixels.data[995000])||(oldpixels.data[996000]-pixels.data[996000])||(oldpixels.data[997000]-pixels.data[997000])||(oldpixels.data[998000]-pixels.data[998000])||(oldpixels.data[999000]-pixels.data[999000])||(oldpixels.data[1000000]-pixels.data[1000000])||(oldpixels.data[1001000]-pixels.data[1001000])||(oldpixels.data[1002000]-pixels.data[1002000])||(oldpixels.data[1003000]-pixels.data[1003000])||(oldpixels.data[1004000]-pixels.data[1004000])||(oldpixels.data[1005000]-pixels.data[1005000])||(oldpixels.data[1006000]-pixels.data[1006000])||(oldpixels.data[1007000]-pixels.data[1007000])||(oldpixels.data[1008000]-pixels.data[1008000])||(oldpixels.data[1009000]-pixels.data[1009000])||(oldpixels.data[1010000]-pixels.data[1010000])||(oldpixels.data[1011000]-pixels.data[1011000])||(oldpixels.data[1012000]-pixels.data[1012000])||(oldpixels.data[1013000]-pixels.data[1013000])||(oldpixels.data[1014000]-pixels.data[1014000])||(oldpixels.data[1015000]-pixels.data[1015000])||(oldpixels.data[1016000]-pixels.data[1016000])||(oldpixels.data[1017000]-pixels.data[1017000])||(oldpixels.data[1018000]-pixels.data[1018000])||(oldpixels.data[1019000]-pixels.data[1019000])||(oldpixels.data[1020000]-pixels.data[1020000])||(oldpixels.data[1021000]-pixels.data[1021000])||(oldpixels.data[1022000]-pixels.data[1022000])||(oldpixels.data[1023000]-pixels.data[1023000])||(oldpixels.data[1024000]-pixels.data[1024000])||(oldpixels.data[1025000]-pixels.data[1025000])||(oldpixels.data[1026000]-pixels.data[1026000])||(oldpixels.data[1027000]-pixels.data[1027000])||(oldpixels.data[1028000]-pixels.data[1028000])||(oldpixels.data[1029000]-pixels.data[1029000])||(oldpixels.data[1030000]-pixels.data[1030000])||(oldpixels.data[1031000]-pixels.data[1031000])||(oldpixels.data[1032000]-pixels.data[1032000])||(oldpixels.data[1033000]-pixels.data[1033000])||(oldpixels.data[1034000]-pixels.data[1034000])||(oldpixels.data[1035000]-pixels.data[1035000])||(oldpixels.data[1036000]-pixels.data[1036000])||(oldpixels.data[1037000]-pixels.data[1037000])||(oldpixels.data[1038000]-pixels.data[1038000])||(oldpixels.data[1039000]-pixels.data[1039000])||(oldpixels.data[1040000]-pixels.data[1040000])||(oldpixels.data[1041000]-pixels.data[1041000])||(oldpixels.data[1042000]-pixels.data[1042000])||(oldpixels.data[1043000]-pixels.data[1043000])||(oldpixels.data[1044000]-pixels.data[1044000])||(oldpixels.data[1045000]-pixels.data[1045000])||(oldpixels.data[1046000]-pixels.data[1046000])||(oldpixels.data[1047000]-pixels.data[1047000])||(oldpixels.data[1048000]-pixels.data[1048000])||(oldpixels.data[1049000]-pixels.data[1049000])||(oldpixels.data[1050000]-pixels.data[1050000])||(oldpixels.data[1051000]-pixels.data[1051000])||(oldpixels.data[1052000]-pixels.data[1052000])||(oldpixels.data[1053000]-pixels.data[1053000])||(oldpixels.data[1054000]-pixels.data[1054000])||(oldpixels.data[1055000]-pixels.data[1055000])||(oldpixels.data[1056000]-pixels.data[1056000])||(oldpixels.data[1057000]-pixels.data[1057000])||(oldpixels.data[1058000]-pixels.data[1058000])||(oldpixels.data[1059000]-pixels.data[1059000])||(oldpixels.data[1060000]-pixels.data[1060000])||(oldpixels.data[1061000]-pixels.data[1061000])||(oldpixels.data[1062000]-pixels.data[1062000])||(oldpixels.data[1063000]-pixels.data[1063000])||(oldpixels.data[1064000]-pixels.data[1064000])||(oldpixels.data[1065000]-pixels.data[1065000])||(oldpixels.data[1066000]-pixels.data[1066000])||(oldpixels.data[1067000]-pixels.data[1067000])||(oldpixels.data[1068000]-pixels.data[1068000])||(oldpixels.data[1069000]-pixels.data[1069000])||(oldpixels.data[1070000]-pixels.data[1070000])||(oldpixels.data[1071000]-pixels.data[1071000])||(oldpixels.data[1072000]-pixels.data[1072000])||(oldpixels.data[1073000]-pixels.data[1073000])||(oldpixels.data[1074000]-pixels.data[1074000])||(oldpixels.data[1075000]-pixels.data[1075000])||(oldpixels.data[1076000]-pixels.data[1076000])||(oldpixels.data[1077000]-pixels.data[1077000])||(oldpixels.data[1078000]-pixels.data[1078000])||(oldpixels.data[1079000]-pixels.data[1079000])||(oldpixels.data[1080000]-pixels.data[1080000])||(oldpixels.data[1081000]-pixels.data[1081000])||(oldpixels.data[1082000]-pixels.data[1082000])||(oldpixels.data[1083000]-pixels.data[1083000])||(oldpixels.data[1084000]-pixels.data[1084000])||(oldpixels.data[1085000]-pixels.data[1085000])||(oldpixels.data[1086000]-pixels.data[1086000])||(oldpixels.data[1087000]-pixels.data[1087000])||(oldpixels.data[1088000]-pixels.data[1088000])||(oldpixels.data[1089000]-pixels.data[1089000])||(oldpixels.data[1090000]-pixels.data[1090000])||(oldpixels.data[1091000]-pixels.data[1091000])||(oldpixels.data[1092000]-pixels.data[1092000])||(oldpixels.data[1093000]-pixels.data[1093000])||(oldpixels.data[1094000]-pixels.data[1094000])||(oldpixels.data[1095000]-pixels.data[1095000])||(oldpixels.data[1096000]-pixels.data[1096000])||(oldpixels.data[1097000]-pixels.data[1097000])||(oldpixels.data[1098000]-pixels.data[1098000])||(oldpixels.data[1099000]-pixels.data[1099000])||(oldpixels.data[1100000]-pixels.data[1100000])||(oldpixels.data[1101000]-pixels.data[1101000])||(oldpixels.data[1102000]-pixels.data[1102000])||(oldpixels.data[1103000]-pixels.data[1103000])||(oldpixels.data[1104000]-pixels.data[1104000])||(oldpixels.data[1105000]-pixels.data[1105000])||(oldpixels.data[1106000]-pixels.data[1106000])||(oldpixels.data[1107000]-pixels.data[1107000])||(oldpixels.data[1108000]-pixels.data[1108000])||(oldpixels.data[1109000]-pixels.data[1109000])||(oldpixels.data[1110000]-pixels.data[1110000])||(oldpixels.data[1111000]-pixels.data[1111000])||(oldpixels.data[1112000]-pixels.data[1112000])||(oldpixels.data[1113000]-pixels.data[1113000])||(oldpixels.data[1114000]-pixels.data[1114000])||(oldpixels.data[1115000]-pixels.data[1115000])||(oldpixels.data[1116000]-pixels.data[1116000])||(oldpixels.data[1117000]-pixels.data[1117000])||(oldpixels.data[1118000]-pixels.data[1118000])||(oldpixels.data[1119000]-pixels.data[1119000])||(oldpixels.data[1120000]-pixels.data[1120000])||(oldpixels.data[1121000]-pixels.data[1121000])||(oldpixels.data[1122000]-pixels.data[1122000])||(oldpixels.data[1123000]-pixels.data[1123000])||(oldpixels.data[1124000]-pixels.data[1124000])||(oldpixels.data[1125000]-pixels.data[1125000])||(oldpixels.data[1126000]-pixels.data[1126000])||(oldpixels.data[1127000]-pixels.data[1127000])||(oldpixels.data[1128000]-pixels.data[1128000])||(oldpixels.data[1129000]-pixels.data[1129000])||(oldpixels.data[1130000]-pixels.data[1130000])||(oldpixels.data[1131000]-pixels.data[1131000])||(oldpixels.data[1132000]-pixels.data[1132000])||(oldpixels.data[1133000]-pixels.data[1133000])||(oldpixels.data[1134000]-pixels.data[1134000])||(oldpixels.data[1135000]-pixels.data[1135000])||(oldpixels.data[1136000]-pixels.data[1136000])||(oldpixels.data[1137000]-pixels.data[1137000])||(oldpixels.data[1138000]-pixels.data[1138000])||(oldpixels.data[1139000]-pixels.data[1139000])||(oldpixels.data[1140000]-pixels.data[1140000])||(oldpixels.data[1141000]-pixels.data[1141000])||(oldpixels.data[1142000]-pixels.data[1142000])||(oldpixels.data[1143000]-pixels.data[1143000])||(oldpixels.data[1144000]-pixels.data[1144000])||(oldpixels.data[1145000]-pixels.data[1145000])||(oldpixels.data[1146000]-pixels.data[1146000])||(oldpixels.data[1147000]-pixels.data[1147000])||(oldpixels.data[1148000]-pixels.data[1148000])||(oldpixels.data[1149000]-pixels.data[1149000])||(oldpixels.data[1150000]-pixels.data[1150000])||(oldpixels.data[1151000]-pixels.data[1151000])||(oldpixels.data[1152000]-pixels.data[1152000])||(oldpixels.data[1153000]-pixels.data[1153000])||(oldpixels.data[1154000]-pixels.data[1154000])||(oldpixels.data[1155000]-pixels.data[1155000])||(oldpixels.data[1156000]-pixels.data[1156000])||(oldpixels.data[1157000]-pixels.data[1157000])||(oldpixels.data[1158000]-pixels.data[1158000])||(oldpixels.data[1159000]-pixels.data[1159000])||(oldpixels.data[1160000]-pixels.data[1160000])||(oldpixels.data[1161000]-pixels.data[1161000])||(oldpixels.data[1162000]-pixels.data[1162000])||(oldpixels.data[1163000]-pixels.data[1163000])||(oldpixels.data[1164000]-pixels.data[1164000])||(oldpixels.data[1165000]-pixels.data[1165000])||(oldpixels.data[1166000]-pixels.data[1166000])||(oldpixels.data[1167000]-pixels.data[1167000])||(oldpixels.data[1168000]-pixels.data[1168000])||(oldpixels.data[1169000]-pixels.data[1169000])||(oldpixels.data[1170000]-pixels.data[1170000])||(oldpixels.data[1171000]-pixels.data[1171000])||(oldpixels.data[1172000]-pixels.data[1172000])||(oldpixels.data[1173000]-pixels.data[1173000])||(oldpixels.data[1174000]-pixels.data[1174000])||(oldpixels.data[1175000]-pixels.data[1175000])||(oldpixels.data[1176000]-pixels.data[1176000])||(oldpixels.data[1177000]-pixels.data[1177000])||(oldpixels.data[1178000]-pixels.data[1178000])||(oldpixels.data[1179000]-pixels.data[1179000])||(oldpixels.data[1180000]-pixels.data[1180000])||(oldpixels.data[1181000]-pixels.data[1181000])||(oldpixels.data[1182000]-pixels.data[1182000])||(oldpixels.data[1183000]-pixels.data[1183000])||(oldpixels.data[1184000]-pixels.data[1184000])||(oldpixels.data[1185000]-pixels.data[1185000])||(oldpixels.data[1186000]-pixels.data[1186000])||(oldpixels.data[1187000]-pixels.data[1187000])||(oldpixels.data[1188000]-pixels.data[1188000])||(oldpixels.data[1189000]-pixels.data[1189000])||(oldpixels.data[1190000]-pixels.data[1190000])||(oldpixels.data[1191000]-pixels.data[1191000])||(oldpixels.data[1192000]-pixels.data[1192000])||(oldpixels.data[1193000]-pixels.data[1193000])||(oldpixels.data[1194000]-pixels.data[1194000])||(oldpixels.data[1195000]-pixels.data[1195000])||(oldpixels.data[1196000]-pixels.data[1196000])||(oldpixels.data[1197000]-pixels.data[1197000])||(oldpixels.data[1198000]-pixels.data[1198000])||(oldpixels.data[1199000]-pixels.data[1199000])||(oldpixels.data[1200000]-pixels.data[1200000])||(oldpixels.data[1201000]-pixels.data[1201000])||(oldpixels.data[1202000]-pixels.data[1202000])||(oldpixels.data[1203000]-pixels.data[1203000])||(oldpixels.data[1204000]-pixels.data[1204000])||(oldpixels.data[1205000]-pixels.data[1205000])||(oldpixels.data[1206000]-pixels.data[1206000])||(oldpixels.data[1207000]-pixels.data[1207000])||(oldpixels.data[1208000]-pixels.data[1208000])||(oldpixels.data[1209000]-pixels.data[1209000])||(oldpixels.data[1210000]-pixels.data[1210000])||(oldpixels.data[1211000]-pixels.data[1211000])||(oldpixels.data[1212000]-pixels.data[1212000])||(oldpixels.data[1213000]-pixels.data[1213000])||(oldpixels.data[1214000]-pixels.data[1214000])||(oldpixels.data[1215000]-pixels.data[1215000])||(oldpixels.data[1216000]-pixels.data[1216000])||(oldpixels.data[1217000]-pixels.data[1217000])||(oldpixels.data[1218000]-pixels.data[1218000])||(oldpixels.data[1219000]-pixels.data[1219000])||(oldpixels.data[1220000]-pixels.data[1220000])||(oldpixels.data[1221000]-pixels.data[1221000])||(oldpixels.data[1222000]-pixels.data[1222000])||(oldpixels.data[1223000]-pixels.data[1223000])||(oldpixels.data[1224000]-pixels.data[1224000])||(oldpixels.data[1225000]-pixels.data[1225000])||(oldpixels.data[1226000]-pixels.data[1226000])||(oldpixels.data[1227000]-pixels.data[1227000]);
          if(flag!=false){
            oldpixels.data.set(pixels.data);
          }
          return (!flag);
        }
      }
      else {
        return false;
      }
    }

    function draw() {
      if (vid.paused && media === 'video') return false;
      else if (media === 'webcam') {
        vid.play();
      }
      context.drawImage(vid, 0, 0);
      pixels = context.getImageData(0, 0, vid.videoWidth, vid.videoHeight);

      // let flag = true;
      // if (media === 'webcam') {
      //   if (oldpixels === undefined) {
      //     oldpixels = pixels;
      //     console.log(pixels.data.length)
      //     flag = false;
      //   }// first frame
      //   else {
      //     for (let i = 0; i < pixels.data.length; i++) {
      //       let temp = oldpixels.data[i] - pixels.data[i]
      //       if (temp !== 0) {
      //         oldpixels.data.set(pixels.data);
      //         flag = false;
      //         break;
      //       }
      //     }
      //     //same frame
      //   }
      // }
      // else {
      //   flag = false;
      // }
      console.time("calculate flag")
      if (detectrepeat()) {//or flag
        // console.log('same')
        console.timeEnd("calculate flag")
        image_timestamp = (performance.now() + performance.timeOrigin) / 1000;
        t0 = performance.now();
        pixels.data.set(dpixels);
        t1 = performance.now();
        context.putImageData(pixels, 0, 0);
      }
      else {
        console.timeEnd("calculate flag")
        // console.log('diff')
        image_timestamp = (performance.now() + performance.timeOrigin) / 1000;
        t0 = performance.now();
        dpixels = detectFastCorner(pixels.data, cw, ch);
        pixels.data.set(dpixels);
        t1 = performance.now();
        context.putImageData(pixels, 0, 0);
      }
      perf = t1 - t0;
      sum += perf;
      if (image_cnt == 0) {
        image_timestamp_start = performance.now();
      } else {
        fps = 1000 * image_cnt / (performance.now() - image_timestamp_start);
        imgInfo = `Image Timestamp: ${image_timestamp.toFixed(6)} ms, FPS: ${fps.toFixed(2)}`;
        document.getElementById("img").innerText = imgInfo;
        perfStr = perf.toString().slice(0, 4);
        wasmStats = `WASM computation time: ${perfStr} ms`;
        document.getElementById("stats").innerText = wasmStats;
      }
      if (image_cnt % 10 === 0) {
        avg = sum / image_cnt;
        avgDisplay.innerText = `Average computation time WASM: ${avg.toString().slice(0, 4)} ms`;
      }
      image_cnt += 1;
      requestAnimationFrame(draw);
    }

    //case for when loop is off and video pauses at end without someone clicking play button
    vid.onpause = () => document.getElementById('playImg').setAttribute('src', 'img/play1.svg');

    function playToggle() { //does both vids together
      if (vid.paused) {
        document.getElementById('playImg').setAttribute('src', 'img/pause1.svg')
        vid.srcObject = null;// for oppo chrome
        vid.play();
        draw();
      }
      else {
        document.getElementById('playImg').setAttribute('src', 'img/play1.svg')
        vid.pause()
      }
    }

    function loopToggle() { //does both vids together
      if (vid.hasAttribute('loop')) {
        document.getElementById('loopImg').setAttribute('src', 'img/loop1.svg')
        vid.removeAttribute('loop')
      }
      else {
        if (vid.paused) {
          playToggle();
        }
        document.getElementById('loopImg').setAttribute('src', 'img/noloop1.svg')
        vid.setAttribute('loop', 'loop')
      }
    }

    function timeData() {
      //FrameNum in Time div, and then time in Canvas div;
      //Can put total frames next to video length; 
      if (media === 'webcam') {
        return
      }
      let vidTime = document.getElementById('vidTime');
      function getTimeCode(microseconds) {
        let hours = Math.floor(microseconds / 3600);
        if (hours < 10) hours = '0' + hours;
        let minutes = Math.floor(microseconds / 60);
        if (minutes < 10) minutes = '0' + minutes;
        let seconds = Math.floor(microseconds);
        if (seconds < 10) seconds = '0' + seconds;
        let milliseconds = microseconds - seconds;
        milliseconds = String(milliseconds).slice(2, 4);
        return result = `${String(hours)} : ${String(minutes)} : ${String(seconds)} : ${String(milliseconds)}`;
      }
      //add thing for frameNum;  
      vidTime.innerHTML = `${getTimeCode(vid.currentTime)}`;
      setTimeout(timeData, 15);
    }

    function appendWasmCheck() {
      if ('WebAssembly' in window) {
        document.getElementById('statsContainer').innerHTML = `(\u2713 WebAssembly is supported in your browser)`
      }
      else if (/Mobi/.test(navigator.userAgent)) {
        document.getElementById('statsContainer').innerHTML = `<h3 style="color:#a37c6e;">\u2639 WebAssembly is not yet supported on mobile devices. Please view on desktop browser.</h3>`
      }
      else {
        document.getElementById('statsContainer').innerHTML = `<h3 style="color:#a37c6e;">\u2639 WebAssembly is not supported in your browser. Please update to the latest version of Chrome or Firefox to enable WebAssembly</h3>`
      }
    }

    function eigenTest() {
      let q_array = [0.99894403, -0.00045966289, -0.045835741, 0.0031135603];
      let angle_vector = web_tracking_module.MatrixProc.AngleVectorFromRotation(q_array);
      for (var i = 0; i < angle_vector.size(); i++) {
        console.log(angle_vector.get(i));
      }

      let size = 9;
      let res_array = [0.14740699, -2.3008106, -0.14179067, -1.642709, -0.087483585, -1.1038882, 0.088762618, -0.20561008, 0.2652723];
      let S_array = [47.43882, -19.394628, 35.115914, -24.109937, 20.93693, -24.344906, 12.571666, -18.995493, -15.804585,
        -19.394628, 195.90506, -26.512773, 159.49212, -33.557157, 122.85588, -37.92472, 83.965011, 53.268423,
        35.115914, -26.512773, 29.936722, -29.362635, 18.750332, -28.247698, 12.663787, -21.77703, -17.438169,
        -24.109937, 159.49212, -29.362635, 135.61078, -32.344451, 106.85348, -34.346363, 74.671888, 49.191292,
        20.93693, -33.557157, 18.750332, -32.344451, 14.927402, -28.557874, 11.081678, -21.200425, -15.727509,
        -24.344906, 122.85588, -28.247698, 106.85348, -28.557874, 88.212634, -28.969528, 62.159677, 42.260373,
        12.571666, -37.92472, 12.663787, -34.346363, 11.081678, -28.969528, 11.231062, -21.057158, -14.836223,
        -18.995493, 83.965011, -21.77703, 74.671888, -21.200425, 62.159677, -21.057158, 45.925328, 31.154471,
        -15.804585, 53.268423, -17.438169, 49.191292, -15.727509, 42.260373, -14.836223, 31.154471, 23.305918];
      let chi2 = web_tracking_module.MatrixProc.Chi2(size, res_array, S_array);
      console.log(chi2);
    }

    function detectFastCorner(data, cw, ch) {
      const len = data.length;
      const mem = web_tracking_module.ImgProc.malloc(len);
      imgproc_HEAPU8.set(data, mem);
      img_processor.detectFastCorner(mem, cw, ch);
      const filtered = imgproc_HEAPU8.subarray(mem, mem + len);
      web_tracking_module.ImgProc.free(mem);
      return filtered;
    }

    function gyroInit() {
      let gyroscope = new Gyroscope({ frequency: 60 });
      let gyro_timestamp_start, gyro_timestamp, gyro_hz, gyro_cnt = 0;
      gyroscope.addEventListener('reading', e => {
        gyro_timestamp = (performance.now() + performance.timeOrigin) / 1000;
        if (gyro_cnt > 0) {
          gyro_hz = 1000 * gyro_cnt / (performance.now() - gyro_timestamp_start);
          gyroInfo = `Gyro Timestamp: ${gyro_timestamp.toFixed(6)} ms
                      Frequency: ${gyro_hz.toFixed(3)} Hz
                      Data: ${gyroscope.x.toFixed(3)}, ${gyroscope.y.toFixed(3)}, ${gyroscope.z.toFixed(3)}`;
          document.getElementById("gyro").innerText = gyroInfo;
        } else {
          gyro_timestamp_start = performance.now();
        }
        gyro_cnt += 1;
      });
      gyroscope.start();
    }

    function accelInit() {
      let accelscope = new Accelerometer({ frequency: 60 });
      let accel_timestamp_start, accel_timestamp, accel_hz, accel_cnt = 0;
      accelscope.addEventListener('reading', e => {
        accel_timestamp = (performance.now() + performance.timeOrigin) / 1000;
        if (accel_cnt > 0) {
          accel_hz = 1000 * accel_cnt / (performance.now() - accel_timestamp_start);
          accelInfo = `Accel Timestamp: ${accel_timestamp.toFixed(6)} ms
                      Frequency: ${accel_hz.toFixed(3)} Hz
                      Data: ${accelscope.x.toFixed(3)}, ${accelscope.y.toFixed(3)}, ${accelscope.z.toFixed(3)}`;
          document.getElementById("accel").innerText = accelInfo;
        } else {
          accel_timestamp_start = performance.now();
        }
        accel_cnt += 1;
      });
      accelscope.start();
    }
  </script>
</body>

</html>